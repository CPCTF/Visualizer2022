var X=Object.defineProperty,V=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var C=(n,e,i)=>e in n?X(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,d=(n,e)=>{for(var i in e||(e={}))B.call(e,i)&&C(n,i,e[i]);if(z)for(var i of z(e))_.call(e,i)&&C(n,i,e[i]);return n},p=(n,e)=>V(n,q(e));var j=(n,e)=>{var i={};for(var s in n)B.call(n,s)&&e.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&z)for(var s of z(n))e.indexOf(s)<0&&_.call(n,s)&&(i[s]=n[s]);return i};var y=(n,e,i)=>(C(n,typeof e!="symbol"?e+"":e,i),i);import{j as k,r as h,M as N,G as K,B as I,a as O,T as R,b as T,P as J,W as Q,E as Z,S as $,R as ee,c as A,d as D,m as x,e as te,f as se,C as ne,g as ie,h as re}from"./vendor.afc95c99.js";const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}};oe();const c=k.exports.jsx,Y=k.exports.jsxs,ae=k.exports.Fragment,S=h.exports.createContext({width:0,height:0,windowSettings:{windows:{},windowIndicies:[],update:()=>"",kill:()=>"",focus:()=>"",minimize:()=>""}}),ce=({children:n})=>{const[e,i]=h.exports.useState({width:window.innerWidth,height:window.innerHeight,windowSettings:{windows:{},windowIndicies:[],update:(s,t)=>{i(r=>{const o=d({},r.windowSettings.windows);o[s]=t;const a=[...r.windowSettings.windowIndicies];return a.includes(s)||a.push(s),p(d({},r),{windowSettings:p(d({},r.windowSettings),{windows:o,windowIndicies:a})})})},kill:s=>{i(t=>{const r=d({},t.windowSettings.windows);delete r[s];const o=t.windowSettings.windowIndicies.filter(a=>a!==s);return p(d({},t),{windowSettings:p(d({},t.windowSettings),{windows:r,windowIndicies:o})})})},focus:s=>{i(t=>{const r=d({},t.windowSettings.windows),o=r[s];if(!o)throw new Error("invalid id");r[s]=p(d({},o),{visible:!0});const a=t.windowSettings.windowIndicies.filter(l=>l!==s);return a.push(s),p(d({},t),{windowSettings:p(d({},t.windowSettings),{windows:r,windowIndicies:a})})})},minimize:s=>{i(t=>{const r=d({},t.windowSettings.windows),o=r[s];if(!o)throw new Error("invalid id");return r[s]=p(d({},o),{visible:!1}),p(d({},t),{windowSettings:p(d({},t.windowSettings),{windows:r})})})}}});return h.exports.useEffect(()=>{const s=()=>{i(t=>p(d({},t),{width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]),c(S.Provider,{value:e,children:n})};class v{static get time(){return this._time}static get deltaTime(){return this._deltaTime}static start(e){this.startTime=e,this.prevTime=e}static update(e){this._time=(e-this.startTime)/1e3,this._deltaTime=(e-this.prevTime)/1e3,this.prevTime=e}}y(v,"startTime",-1),y(v,"_time",-1),y(v,"_deltaTime",-1),y(v,"prevTime",-1);class E extends N{constructor(){super(...arguments);y(this,"initialized",!1)}start(){}update(){!this.visible||(this.initialized||(this.start(),this.initialized=!0),this.children.map(e=>{(e instanceof M||e instanceof E)&&e.update()}))}}class M extends K{constructor(){super();y(this,"initialized",!1)}start(){}update(){!this.visible||(this.initialized||(this.start(),this.initialized=!0),this.children.map(e=>{(e instanceof M||e instanceof E)&&e.update()}))}}class de extends EventTarget{constructor(){super()}}const H=new de;class le extends M{start(){}update(){super.update()}}class ue extends E{constructor(){super(new I(.1,.2,.05),new O({color:65280}))}start(){}update(){super.update()}}class he extends M{constructor(){super();new Array(100).fill(null).forEach((e,i)=>{const s=new ue,t=i/100*Math.PI*2;s.position.set(Math.sin(t)*5,0,Math.cos(t)*5),s.rotation.y=t,this.add(s)})}start(){}update(){if(super.update(),Math.random()<.01){const e=this.children[Math.floor(Math.random()*100)];if(!e)return;new R(e.scale,.5,{x:3,y:3,z:3,ease:T.easeOut}),new R(e.position,.5,{x:e.position.x,y:1,z:e.position.z,ease:T.easeOut}),new R(e.rotation,.5,{x:0,y:e.rotation.y+Math.PI*1,z:0,ease:T.easeOut})}}}class we extends E{constructor(){super(new I(1,1,1),new O({color:16711680}))}start(){console.log("circuit")}update(){super.update(),this.rotation.y=Math.PI*v.deltaTime}}class pe extends J{constructor(){super(60,1,1,2e3)}start(){}update(){this.position.set(Math.sin(v.time*.1)*3,2,Math.cos(v.time*.1)*3),this.lookAt(0,0,0)}}const fe=n=>{const e=new Q({canvas:n,alpha:!0,antialias:!0}),i=new Z(e),s=new pe,t=(a,l)=>{e.setSize(a,l),e.setPixelRatio(window.devicePixelRatio),s.aspect=a/l,s.updateProjectionMatrix()},r=new $;r.add(new le,new he,new we),H.addEventListener("start",()=>{console.log("start ctf")}),H.addEventListener("end",()=>{console.log("end ctf")}),H.addEventListener("recalcurate",async()=>{console.log("recalcurate")}),H.addEventListener("submit",()=>{console.log("submit")}),i.addPass(new ee(r,s));const o=a=>{requestAnimationFrame(o),v.update(a),e.render(r,s),s.update(),r.children.map(l=>{(l instanceof M||l instanceof E)&&l.update()})};return v.start(performance.now()),requestAnimationFrame(o),t},me=({width:n,height:e})=>{const i=h.exports.useRef(null),s=h.exports.useRef(()=>{}),[t,r]=h.exports.useState(new A(new D));return x.exports.useTick(()=>{t.update()}),h.exports.useEffect(()=>{s.current&&s.current(n,e)},[n,e]),h.exports.useEffect(()=>{const o=document.createElement("canvas");i.current=o,s.current=fe(o),s.current(n,e),r(new A(D.from(o))),document.body.append(o)},[]),c(x.exports.Sprite,{texture:t,width:n,height:e})},xe={Component:null,title:"Clock",rect:{x:0,y:0,width:500,height:500},visible:!0,fullscreen:!1},G={visualizer:{Component:me,title:"Visualizer",rect:{x:0,y:0,width:500,height:500},visible:!0,fullscreen:!1},clock:{Component:null,title:"Clock",rect:{x:0,y:0,width:500,height:500},visible:!0,fullscreen:!1}},P=54,b=32;var U="/Visualizer/assets/xp.3ff07b20.jpg";const ge=()=>{const{width:n,height:e}=h.exports.useContext(S);return c(x.exports.Sprite,{image:U,anchor:0,x:0,y:0,width:n,height:e-P})},ve=(n,e)=>{const t=[0,0],r=[0,0];let o="none";const a={x:0,y:0};let l="pointer",w={x:0,y:0,width:0,height:0};return{mouseDownHandler:m=>u=>{a.x=u.data.global.x,a.y=u.data.global.y,m.fullscreen?w={x:0,y:0,width:window.innerWidth,height:window.innerHeight-P}:w=m.rect,e.focus(n),!(t[0]===0&&t[1]===0&&a.y-w.y>32)&&(r[0]=t[0],r[1]=t[1],o=t[0]===0&&t[1]===0?"move":"scale",e.update(n,p(d({},m),{rect:w,fullscreen:!1})))},mouseMoveHandler:m=>u=>{const g=m.fullscreen?{x:0,y:0,width:window.innerWidth,height:window.innerHeight-P}:m.rect;if(u.clientX-g.x<8?t[0]=-1:g.x+g.width-u.clientX<8?t[0]=1:t[0]=0,u.clientY-g.y<8?t[1]=-1:g.y+g.height-u.clientY<8?t[1]=1:t[1]=0,t[0]*t[1]===1?l="nwse-resize":t[0]*t[1]===-1?l="nesw-resize":t[0]!==0?l="ew-resize":t[1]!==0?l="ns-resize":u.clientY-g.y<32?l="grab":l="default",o!=="none")if(o==="move")l="grabbing",e.update(n,p(d({},m),{rect:{x:w.x+u.clientX-a.x,y:w.y+u.clientY-a.y,width:m.rect.width,height:m.rect.height}}));else{const f=d({},w);r[0]===1?f.width=w.width-a.x+u.clientX:r[0]===-1&&(f.width=a.x+w.width-u.clientX,f.x=w.x-a.x+u.clientX),r[1]===1?f.height=w.height-a.y+u.clientY:r[1]===-1&&(f.height=a.y+w.height-u.clientY,f.y=w.y-a.y+u.clientY),f.width=Math.max(200,f.width),f.height=Math.max(b,f.height),e.update(n,p(d({},m),{rect:f}))}},mouseUpHandler:()=>()=>{o="none"},cursorGetter:()=>l}},ye=({id:n,windowInfo:e})=>{const{title:i,rect:s,visible:t,fullscreen:r,Component:o}=e,{windowSettings:a}=h.exports.useContext(S),l=h.exports.useRef(e);h.exports.useEffect(()=>{l.current=e},[e]);const[w,L]=h.exports.useState({mouseDownHandler:null});return h.exports.useEffect(()=>{const{mouseDownHandler:W,mouseMoveHandler:F,mouseUpHandler:m}=ve(n,a);L({mouseDownHandler:W});const u=f=>{F(l.current||e)(f)},g=()=>{m()()};return window.addEventListener("mousemove",u),window.addEventListener("mouseup",g),console.log("rebuild"),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",g)}},[]),Y(x.exports.Container,{position:t?r?[0,0]:[s.x,s.y]:[s.x,-99999],interactive:!0,mousedown:w.mouseDownHandler?w.mouseDownHandler(e):()=>"",children:[c(x.exports.Sprite,{image:U,width:s.width,height:s.height}),c(x.exports.Container,{position:[0,0],children:c(x.exports.Text,{text:i,anchor:[0,.5],position:[0,b/2],style:new te({align:"center",fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:b*.5,fill:["#ffffff","#00ff99"],stroke:"#01d27e",strokeThickness:5,letterSpacing:20,dropShadow:!0,dropShadowColor:"#ccced2",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!0,wordWrapWidth:440})})}),c(x.exports.Container,{position:[0,b],children:o?c(o,{width:s.width,height:s.height-b}):c(x.exports.Container,{})})]})},Se=()=>{const{windowSettings:{windows:n,windowIndicies:e}}=h.exports.useContext(S);return Y(ae,{children:[c(ge,{}),e.map(i=>c(ye,{windowInfo:n[i]||xe,id:i,focus:!1},i))]})},Ee=({children:n,Context:e,render:i})=>c(e.Consumer,{children:s=>i(c(e.Provider,{value:s,children:n}))}),Me=i=>{var s=i,{children:n}=s,e=j(s,["children"]);return c(Ee,{Context:S,render:t=>c(x.exports.Stage,p(d({},e),{children:t})),children:n})},be=x.exports.withFilters(x.exports.Container,{rgbsplit:se,crt:ne}),ze=()=>{const{width:n,height:e,windowSettings:{update:i}}=h.exports.useContext(S);return h.exports.useEffect(()=>{i("visualizer",G.visualizer),i("clock",G.clock)},[]),c(Me,{crt:{lineContrast:1},rgbsplit:{red:[-.4,.2],blue:[.68,.2],green:[-.06,.2]},width:n,height:e,children:c(be,{children:c(Se,{})})})},He=()=>c(ce,{children:c(ze,{})});ie.render(c(re.StrictMode,{children:c(He,{})}),document.getElementById("root"));
